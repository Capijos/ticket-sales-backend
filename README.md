# Ticket Sales Backend

This is a Django REST API backend for a ticket sales system. It allows management of users, products, product types, shopping carts, sales, and orders.

## Table of Contents

- [Installation](#installation)
- [Database Structure](#database-structure)
- [API Endpoints](#api-endpoints)
- [Functionalities](#functionalities)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)

## Installation

To install and run the Django API backend locally, follow these steps:

1. Clone the repository:
    ```bash
    git clone https://github.com/yourusername/ticket-sales-backend.git
    ```

2. Navigate to the project directory:
    ```bash
    cd ticket-sales-backend
    ```

3. Set up the virtual environment and install dependencies:
    ```bash
    python -m venv venv
    source venv/bin/activate
    pip install -r requirements.txt
    ```

4. Apply migrations to set up the database:
    ```bash
    python manage.py migrate
    ```

5. Run the server:
    ```bash
    python manage.py runserver
    ```

6. Access the API at `http://localhost:8000/`

## Database Structure

The database structure is defined using Django models. Here's an overview:

### Entity-Relationship Diagram

![ERD](path/to/your/image.png)
### User
- `user_id` (Auto-generated by Django)
- `first_name` (VARCHAR(100) NOT NULL)
- `last_name` (VARCHAR(100) NOT NULL)
- `document_id` (VARCHAR(50) UNIQUE NOT NULL)
- `age` (INTEGER NOT NULL)
- `email` (VARCHAR(254) UNIQUE NOT NULL)
- `password` (VARCHAR(255) NOT NULL)
- `created_at` (Auto-generated by Django)

### Product
- `product_id` (Auto-generated by Django)
- `name` (VARCHAR(255) NOT NULL)
- `description` (TEXT)
- `images` (JSONB)
- `expiration_date` (DATE NOT NULL)
- `created_at` (Auto-generated by Django)

### ProductType
- `type_id` (Auto-generated by Django)
- `product` (ForeignKey to Product)
- `type_name` (VARCHAR(100) NOT NULL)
- `price` (DECIMAL(10, 2) NOT NULL)
- `stock` (INTEGER NOT NULL)

### Cart
- `cart_id` (Auto-generated by Django)
- `user` (ForeignKey to User)
- `created_at` (Auto-generated by Django)

### CartItem
- `cart_item_id` (Auto-generated by Django)
- `cart` (ForeignKey to Cart)
- `product` (ForeignKey to Product)
- `type` (ForeignKey to ProductType)
- `quantity` (INTEGER NOT NULL)

### Sale
- `sale_id` (Auto-generated by Django)
- `user` (ForeignKey to User)
- `product` (ForeignKey to Product)
- `type` (ForeignKey to ProductType)
- `quantity` (INTEGER NOT NULL)
- `total_price` (DECIMAL(10, 2) NOT NULL)
- `sale_date` (Auto-generated by Django)

### Order
- `order_id` (Auto-generated by Django)
- `user` (ForeignKey to User)
- `total_price` (DECIMAL(10, 2) NOT NULL)
- `order_date` (Auto-generated by Django)

### OrderItem
- `order_item_id` (Auto-generated by Django)
- `order` (ForeignKey to Order)
- `product` (ForeignKey to Product)
- `type` (ForeignKey to ProductType)
- `quantity` (INTEGER NOT NULL)
- `price` (DECIMAL(10, 2) NOT NULL)

## API Endpoints

Here are some key API endpoints provided by this Django API:

- `POST /api/users/` - Create a new user
- `GET /api/users/{id}/` - Retrieve a user by ID
- `POST /api/products/` - Create a new product
- `GET /api/products/` - Retrieve all products
- `POST /api/carts/` - Create a new shopping cart
- `POST /api/carts/{cart_id}/items/` - Add an item to a cart
- `POST /api/sales/` - Create a new sale
- `GET /api/sales/{id}/` - Retrieve a sale by ID
- `POST /api/orders/` - Create a new order
- `GET /api/orders/{id}/` - Retrieve an order by ID

## Functionalities

- **User Management**: CRUD operations for users.
- **Product Management**: CRUD operations for products and their types.
- **Cart Management**: Operations to create carts, add items, and view cart contents.
- **Sales Management**: Record sales transactions with details of the user, product, and type.
- **Order Management**: Manage customer orders with details of ordered items and total prices.

## Usage

Interact with the API using tools like `curl` or Postman. Example requests:

### Create a new user
```bash
curl -X POST http://localhost:8000/api/users/ -H "Content-Type: application/json" -d '{"first_name": "John", "last_name": "Doe", "document_id": "12345678", "age": 30, "email": "john.doe@example.com", "password": "securepassword"}'
